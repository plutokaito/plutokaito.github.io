<!doctype html><html lang=cn data-theme><head><title>KaitoShy | ShenYu 后台前端页面部署方式</title><meta charset=utf-8><meta name=generator content="Hugo 0.82.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=description content="该篇文章主要是讲述 shenyu 网关怎么集成静态文件进行部署"><link rel=stylesheet href=/css/style.min.12394ad1dd77abc5f2b8ac9fff89a6f77f11f1db9126284cdea41236936f5c56.css integrity="sha256-EjlK0d13q8XyuKyf/4mm938R8duRJihM3qQSNpNvXFY=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.f798cbda9aaa38f89eb38be6414bd082cfd71a6780375cbf67b6d2fb2b96491e.css integrity="sha256-95jL2pqqOPies4vmQUvQgs/XGmeAN1y/Z7bS+yuWSR4=" crossorigin=anonymous type=text/css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin=anonymous><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=canonical href=/post/shenyu-deploy-with-dashboard/><script type=text/javascript src=/js/anatole-header.min.0c05c0a90d28c968a1cad4fb31abd0b8e1264e788ccefed022ae1d3b6f627514.js integrity="sha256-DAXAqQ0oyWihytT7MavQuOEmTniMzv7QIq4dO29idRQ=" crossorigin=anonymous></script><script type=text/javascript src=/js/anatole-theme-switcher.min.47918423907d577c1f04c2fd28730186eca486fb18e52fc882c3c7ad5f2540b1.js integrity="sha256-R5GEI5B9V3wfBML9KHMBhuykhvsY5S/IgsPHrV8lQLE=" crossorigin=anonymous></script><meta name=twitter:card content="summary"><meta name=twitter:title content=" ShenYu 后台前端页面部署方式"><meta name=twitter:description content="该篇文章主要是讲述 shenyu 网关怎么集成静态文件进行部署"></head><body><div class="sidebar animated fadeInDown"><div class=logo-title><div class=title><img src=/images/avatar.png alt="profile picture"><h3 title><a href=/>I'm KaitoShy</a></h3><div class=description><p>Java And PHP Developer</p></div></div></div><ul class=social-links><li><a href=https://github.com/plutokaito rel=me aria-label=GitHub><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li><a href=mailto:kaito78@163.com rel=me aria-label=e-mail><i class="fas fa-envelope fa-2x" aria-hidden=true></i></a></li></ul><div class=footer><div class=by_farbox>&copy; KaitoShy 2021</div></div></div><div class=main><div class="page-top animated fadeInDown"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true></span><span aria-hidden=true></span><span aria-hidden=true></span></a><ul class=nav id=navMenu><li><a href=/ title>主页(Home)</a></li><li><a href=/post/ title>博客(Blog)</a></li><li><a href=/about/ title>关于(About)</a></li><li><a href=/tags/ title>标签(tags)</a></li><li><a href=/contact/ title>联系(Contact)</a></li><li class=theme-switch-item><a class=theme-switch title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></li></ul></div><div class=autopagerize_page_element><div class=content><div class="post animated fadeInDown"><div class=post-content><div class=post-title><h3>ShenYu 后台前端页面部署方式</h3><div class=info><em class="fas fa-calendar-day"></em><span class=date>Tue, Jun 8, 2021</span>
<em class="fas fa-stopwatch"></em><span class=reading-time></span></div></div><h1 id=前言>前言</h1><p>由于之前的接触的到的管理程序都是后端代码和前端分别打包放在，然后利用 Nginx 做代理，将两个代码进行访问。但是看 ShenYu 启动时是直接能将前端代码进行访问，是有什么黑魔法么？
还是将前端代码直接打包好放入 ShenYu Admin 中呢？还是有其他方法呢？</p><h1 id=static-静态文件>Static 静态文件</h1><h2 id=验证是否含有静态文件>验证是否含有静态文件</h2><p>查看源代码，确实有静态文件，
<img src=https://upload-images.jianshu.io/upload_images/4058540-f9028a5753c2ca12.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/240 alt=static></p><p>我们先验证一下，是不是这里，删除这块代码然后再启动，果然页面就办法访问了。
<img src=https://upload-images.jianshu.io/upload_images/4058540-be604aae6b4c1287.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt=访问页面></p><h2 id=总结>总结</h2><p>利用编译好的前端静态文件，减少了使用者的两次编译部署(前端编译打包一次，后端代码打包一次)的麻烦，但这样对于前端代码的更新，static 目录就要随着更新，那这样的话，<code>shenyu-dashboard</code> 的目录不就没什么作用了么？那他有扮演着什么样的角色呢？</p><h1 id=shenyu-dashboard-的作用>shenyu-dashboard 的作用</h1><p>查看 shenyu-admin 的 <code>pom.xml</code> 时发现这么一个插件
<img src=https://upload-images.jianshu.io/upload_images/4058540-cd981a4a6875c212.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt=erislett插件></p><p>查看 eirslett 插件的 <a href=https://github.com/eirslett/frontend-maven-plugin>github 地址</a>, 介绍有这么一段话：
<code>this plugin downloads/installs Node and NPM locally for your project</code><br>这个意思就是说，在本地执行前端代码的编译的工作。安装 npm 的教程，可以参考
<a href=https://www.liaoxuefeng.com/wiki/1022910821149312/1023025597810528>安装Node.js和npm</a>, 如果没安装 npm 和 nodejs 也没关系，该插件会帮你进行安装。</p><p>根据 shenyu-admin 中的 <code>pom.xml</code> 上的注释，我们修改项目中的 pom 文件，结果如下图所示：
<img src=https://upload-images.jianshu.io/upload_images/4058540-30386cbea34c6950.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt=image.png></p><p>再次重启。发现还是无法访问，再次查看 <code>pom.xml</code> 文档，发现前端代码的工作目录为：<code>shenyu-dashboard</code>, 如下图所示
<img src=https://upload-images.jianshu.io/upload_images/4058540-9751115f0bf2acb3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt="工作目录为 shenyu-dashboard"></p><p>查看源代码中 <code>shenyu-dashboard</code> 文件，发现为空。查看源代码，发现 <a href=https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97>git 子模块</a>的设置，如下图所示：
<img src=https://upload-images.jianshu.io/upload_images/4058540-9c7cc21bef4c214b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt=前端子模块代码></p><p>使用命令 <code>git submodule update --init --recursive</code>, 更新代码，成功后如下图所示
<img src=https://upload-images.jianshu.io/upload_images/4058540-c8915754b165c413.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt=更新子模块>
这个时候会很慢，要耐心等待，没有进度条。</p><p>再次启动。又发现报错了
<img src=https://upload-images.jianshu.io/upload_images/4058540-67b8029dab878adc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt=npm报错></p><p>修改如下：
<img src=https://upload-images.jianshu.io/upload_images/4058540-dbb626a592c6d2fd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt=pom.xml>
注释掉为了防止再次安装，更改 <code>--registry</code> 成淘宝镜像，加速安装</p><p>好了，再次执行命令<code>mvn clean install</code>后发现，之前删掉的文件又回来了。
<img src=https://upload-images.jianshu.io/upload_images/4058540-1d5e818cd59cebc9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt="static 中的文件"></p><blockquote><p>为了防止每次都编译前端代码，可以将项目根目录下的 pom 文件中配置 <code>frontend.plugin.skip</code> 修改成 <code>true</code>
启动程序，有可以愉快开心的玩耍了。</p></blockquote><h1 id=总结-1>总结：</h1><ol><li><code>frontend-maven-plugin</code> 用在管理后台上还是很不错的。</li></ol><blockquote><p>拓展阅读：
<a href=https://github.com/dromara/shenyu>Shenyu 网关 Github</a></p></blockquote></div><div class=post-footer><div class=info><span class=separator><a class=tag href=/tags/shenyu/>shenyu</a><a class=tag href=/tags/gateway/>gateway</a><a class=tag href=/tags/java/>java</a></span></div></div></div></div></div></div><script type=text/javascript src=/js/medium-zoom.min.2d6fd0be87fa98f0c9b4dc2536b312bbca48757f584f6ea1f394abc9bcc38fbc.js integrity="sha256-LW/Qvof6mPDJtNwlNrMSu8pIdX9YT26h85SrybzDj7w=" crossorigin=anonymous></script></body></html>